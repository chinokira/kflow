# Configuration SonarQube pour KFLOW
# Application full-stack : Backend Java 21 + Spring Boot 3 + Frontend Angular 21

# ===================================================================
# Informations générales du projet
# ===================================================================
sonar.projectKey=kflow
sonar.projectName=KFLOW - Kayak Freestyle Leaderboard Organizer
sonar.projectVersion=1.0.0

# URL du serveur SonarQube (modifier selon votre installation)
# Par défaut : http://localhost:9000
sonar.host.url=http://localhost:9000

# Token d'authentification (générer depuis SonarQube : My Account > Security > Generate Tokens)
# sonar.token=your_sonarqube_token_here

# ===================================================================
# Configuration des sources
# ===================================================================
# Inclure les sources backend et frontend
sonar.sources=kflow_back/src/main/java,kflow_front/src

# Exclure les fichiers générés et dépendances
sonar.exclusions=\
  **/node_modules/**,\
  **/target/**,\
  **/dist/**,\
  **/*.spec.ts,\
  **/*.spec.js,\
  **/test/**,\
  **/tests/**,\
  **/*.config.ts,\
  **/*.config.js,\
  **/environments/**

# ===================================================================
# Configuration Backend Java
# ===================================================================
sonar.java.source=21
sonar.java.binaries=kflow_back/target/classes
sonar.java.libraries=kflow_back/target/**/*.jar

# Tests Java
sonar.tests=kflow_back/src/test/java
sonar.junit.reportPaths=kflow_back/target/surefire-reports
sonar.jacoco.reportPaths=kflow_back/target/jacoco.exec

# Exclusions spécifiques Java
sonar.coverage.exclusions=\
  **/config/**,\
  **/dto/**,\
  **/models/**,\
  **/KflowApplication.java

# ===================================================================
# Configuration Frontend Angular/TypeScript
# ===================================================================
sonar.typescript.lcov.reportPaths=kflow_front/coverage/lcov.info
sonar.javascript.lcov.reportPaths=kflow_front/coverage/lcov.info

# Exclusions spécifiques TypeScript/Angular
sonar.javascript.exclusions=\
  **/node_modules/**,\
  **/dist/**,\
  **/*.spec.ts,\
  **/test.ts,\
  **/polyfills.ts,\
  **/environments/**

# ===================================================================
# Configuration de la couverture de code
# ===================================================================
# Seuil minimal de couverture (warning si en dessous)
sonar.coverage.exclusions=\
  **/*.spec.ts,\
  **/*.spec.js,\
  **/test/**,\
  **/tests/**,\
  **/models/**,\
  **/dto/**

# ===================================================================
# Configuration de l'encodage
# ===================================================================
sonar.sourceEncoding=UTF-8

# ===================================================================
# Configuration des duplications
# ===================================================================
# Taille minimale d'un bloc dupliqué (en tokens)
sonar.cpd.java.minimumTokens=100
sonar.cpd.ts.minimumTokens=100

# ===================================================================
# Configuration de l'analyse
# ===================================================================
# Niveau de verbosité (DEBUG, INFO, WARN)
sonar.log.level=INFO

# Activer l'analyse incrémentale (plus rapide)
sonar.scm.provider=git
sonar.scm.exclusions.disabled=true

# ===================================================================
# Paramètres de qualité personnalisés
# ===================================================================
# Activer les règles de sécurité
sonar.security.enable=true

# Désactiver certaines règles si nécessaire
# sonar.issue.ignore.multicriteria=e1
# sonar.issue.ignore.multicriteria.e1.ruleKey=java:S1234
# sonar.issue.ignore.multicriteria.e1.resourceKey=**/*.java
